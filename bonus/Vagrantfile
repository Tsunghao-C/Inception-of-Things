# Automatically Generated by Vagrant Config Generator, see https://github.com/jianan1104/vagrantfile-generator
Vagrant.configure('2') do |config|

    config.vm.define "GitlabS" do |gitlabserver|
        gitlabserver.vm.hostname = "GitlabS"
        gitlabserver.vm.provider "virtualbox" do |vb|
            vb.cpus = '2'
            vb.memory = '2048'
        end
        gitlabserver.vm.network "forwarded_port", guest: 9999, host: 9999, protocol: "tcp"
        gitlabserver.vm.box = 'bento/debian-12'
        gitlabserver.vm.box_version = '202502.21.0'
        gitlabserver.vm.network "private_network", ip: '192.168.56.110'
        gitlabserver.vm.provision "shell", inline: <<-SHELL
            sed -i 's/ChallengeResponseAuthentication no/ChallengeResponseAuthentication yes/g' /etc/ssh/sshd_config
            service ssh restart
        SHELL
        gitlabserver.vm.provision "shell", path: "scripts/install_gitlab.sh", env: {"HOST_IP" => "#{ENV['HOST_IP']}"}
    end
end
